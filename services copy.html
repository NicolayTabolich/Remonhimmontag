<!DOCTYPE html>
<html lang="ru">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Новостной блок с полноэкранным просмотром</title>
   <style>
      /* Все предыдущие стили остаются */

      /* Добавляем стили для блока последних новостей */
      .latest-news {
         margin-bottom: 40px;
      }

      .latest-news h2 {
         font-size: 2rem;
         color: #2c3e50;
         margin-bottom: 20px;
         text-align: center;
         border-bottom: 2px solid #3498db;
         padding-bottom: 10px;
      }

      .latest-news-grid {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
         gap: 20px;
      }

      .latest-news-card {
         background: white;
         border-radius: 8px;
         overflow: hidden;
         box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
         transition: transform 0.3s ease, box-shadow 0.3s ease;
         cursor: pointer;
      }

      .latest-news-card:hover {
         transform: translateY(-5px);
         box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }

      .latest-news-image {
         width: 100%;
         height: 200px;
         object-fit: cover;
      }

      .latest-news-content {
         padding: 15px;
      }

      .latest-news-date {
         color: #7f8c8d;
         font-size: 0.85rem;
         margin-bottom: 8px;
      }

      .latest-news-title {
         font-size: 1.2rem;
         margin-bottom: 10px;
         color: #2c3e50;
      }

      .latest-news-summary {
         color: #555;
         font-size: 0.9rem;
         margin-bottom: 12px;
         line-height: 1.5;
      }

      /* Остальные стили остаются без изменений */
      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: 'Arial', sans-serif;
      }

      body {
         background-color: #f5f5f5;
         color: #333;
         line-height: 1.6;
      }

      .container {
         max-width: 1440px;
         margin: 0 auto;
         padding: 0 15px;
      }

      header {
         background-color: #2c3e50;
         color: white;
         padding: 20px 0;
         text-align: center;
         margin-bottom: 30px;
      }

      h1 {
         font-size: 2.5rem;
         margin-bottom: 10px;
      }

      .filters {
         display: flex;
         justify-content: center;
         gap: 20px;
         margin-bottom: 30px;
         flex-wrap: wrap;
      }

      .filter-group {
         display: flex;
         align-items: center;
         gap: 10px;
      }

      .filter-group label {
         font-weight: bold;
      }

      select {
         padding: 8px 12px;
         border: 1px solid #ddd;
         border-radius: 4px;
         background-color: white;
         font-size: 1rem;
      }

      .news-grid {
         display: grid;
         grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
         gap: 25px;
         margin-bottom: 40px;
      }

      .news-card {
         background-color: white;
         border-radius: 8px;
         overflow: hidden;
         box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
         transition: transform 0.3s ease;
         cursor: pointer;
      }

      .news-card:hover {
         transform: translateY(-5px);
      }

      .news-image {
         width: 100%;
         height: 200px;
         object-fit: cover;
      }

      .news-content {
         padding: 20px;
      }

      .news-date {
         color: #7f8c8d;
         font-size: 0.9rem;
         margin-bottom: 10px;
      }

      .news-title {
         font-size: 1.3rem;
         margin-bottom: 10px;
         color: #2c3e50;
      }

      .news-summary {
         color: #555;
         margin-bottom: 15px;
      }

      .modal {
         display: none;
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.8);
         z-index: 1000;
         overflow-y: auto;
      }

      .modal-content {
         background-color: white;
         margin: 30px auto;
         padding: 30px;
         border-radius: 8px;
         max-width: 1000px;
         width: 90%;
         position: relative;
      }

      .close-modal {
         position: absolute;
         top: 15px;
         right: 15px;
         font-size: 1.5rem;
         cursor: pointer;
         color: #7f8c8d;
         z-index: 10;
      }

      .modal-title {
         font-size: 1.8rem;
         margin-bottom: 15px;
         color: #2c3e50;
      }

      .modal-date {
         color: #7f8c8d;
         margin-bottom: 20px;
      }

      .modal-main-image {
         width: 100%;
         margin-bottom: 25px;
         border-radius: 8px;
         overflow: hidden;
      }

      .modal-main-image img {
         width: 100%;
         height: 400px;
         object-fit: cover;
      }

      .modal-text {
         margin-bottom: 25px;
         line-height: 1.7;
      }

      .modal-gallery {
         margin-top: 30px;
      }

      .gallery-title {
         font-size: 1.3rem;
         margin-bottom: 15px;
         color: #2c3e50;
      }

      .slider-container {
         position: relative;
         width: 100%;
         overflow: hidden;
         border-radius: 8px;
         touch-action: pan-y;
      }

      .slider {
         display: flex;
         transition: transform 0.5s ease;
      }

      .slide {
         min-width: 100%;
         position: relative;
      }

      .slide img {
         width: 100%;
         height: 400px;
         object-fit: cover;
         cursor: pointer;
         user-select: none;
      }

      .slider-arrow {
         position: absolute;
         top: 50%;
         transform: translateY(-50%);
         background-color: rgba(0, 0, 0, 0.5);
         color: white;
         border: none;
         width: 40px;
         height: 40px;
         border-radius: 50%;
         font-size: 1.2rem;
         cursor: pointer;
         display: flex;
         align-items: center;
         justify-content: center;
         transition: background-color 0.3s;
         z-index: 5;
      }

      .slider-arrow:hover {
         background-color: rgba(0, 0, 0, 0.7);
      }

      .slider-arrow.prev {
         left: 15px;
      }

      .slider-arrow.next {
         right: 15px;
      }

      .slider-controls {
         display: flex;
         justify-content: center;
         align-items: center;
         margin-top: 15px;
         gap: 10px;
      }

      .slider-dots {
         display: flex;
         gap: 8px;
      }

      .dot {
         width: 10px;
         height: 10px;
         border-radius: 50%;
         background-color: #bdc3c7;
         cursor: pointer;
         transition: background-color 0.3s;
      }

      .dot.active {
         background-color: #3498db;
      }

      /* Изменения для полноэкранного режима */
      .fullscreen-image {
         display: none;
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.95);
         z-index: 2000;
         justify-content: center;
         align-items: center;
         flex-direction: column;
         touch-action: pan-y;
      }

      .fullscreen-container {
         position: relative;
         width: 100%;
         height: 100%;
         display: flex;
         justify-content: center;
         align-items: center;
      }

      /* Основные изменения здесь - фиксированная высота на весь экран */
      .fullscreen-image img {
         width: auto;
         height: 50vh;
         /* Фиксированная высота на весь экран */
         max-width: 100vw;
         /* Максимальная ширина - ширина экрана */
         object-fit: contain;
         /* Сохраняем пропорции изображения */
         user-select: none;
      }

      .fullscreen-caption {
         color: white;
         margin-top: 15px;
         font-size: 1.1rem;
         position: absolute;
         bottom: 20px;
         left: 0;
         width: 100%;
         text-align: center;
         background-color: rgba(0, 0, 0, 0.5);
         padding: 10px;
      }

      .fullscreen-arrow {
         position: absolute;
         top: 50%;
         transform: translateY(-50%);
         background-color: rgba(255, 255, 255, 0.2);
         color: white;
         border: none;
         width: 50px;
         height: 50px;
         border-radius: 50%;
         font-size: 1.5rem;
         cursor: pointer;
         display: flex;
         align-items: center;
         justify-content: center;
         transition: background-color 0.3s;
         z-index: 5;
      }

      .fullscreen-arrow:hover {
         background-color: rgba(255, 255, 255, 0.4);
      }

      .fullscreen-arrow.prev {
         left: 30px;
      }

      .fullscreen-arrow.next {
         right: 30px;
      }

      .close-fullscreen {
         position: absolute;
         top: 20px;
         right: 30px;
         color: white;
         font-size: 2rem;
         cursor: pointer;
         z-index: 10;
         background-color: rgba(0, 0, 0, 0.5);
         width: 40px;
         height: 40px;
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
      }

      .pagination {
         display: flex;
         justify-content: center;
         gap: 10px;
         margin-top: 30px;
      }

      .page-btn {
         padding: 8px 15px;
         border: 1px solid #ddd;
         background-color: white;
         border-radius: 4px;
         cursor: pointer;
         transition: background-color 0.3s;
      }

      .page-btn.active {
         background-color: #3498db;
         color: white;
         border-color: #3498db;
      }

      .page-btn:hover:not(.active) {
         background-color: #f1f1f1;
      }

      @media (max-width: 768px) {
         .latest-news-grid {
            grid-template-columns: 1fr;
         }

         .news-grid {
            grid-template-columns: 1fr;
         }

         .modal-content {
            margin: 20px;
            padding: 20px;
         }

         .modal-main-image img {
            height: 250px;
         }

         .slide img {
            height: 250px;
         }

         .slider-arrow {
            width: 30px;
            height: 30px;
            font-size: 1rem;
         }

         .fullscreen-arrow {
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
         }

         .fullscreen-arrow.prev {
            left: 10px;
         }

         .fullscreen-arrow.next {
            right: 10px;
         }

         /* Адаптация для мобильных устройств */
         .fullscreen-image img {
            width: 100%;
            height: auto;
            max-height: 100vh;
         }
      }
   </style>
</head>

<body>
   <header>
      <div class="container">
         <h1>Новостной портал</h1>
         <p>Самые свежие и актуальные новости</p>
      </div>
   </header>

   <div class="container">
      <!-- Блок последних новостей -->
      <section class="latest-news">
         <h2>Последние новости</h2>
         <div class="latest-news-grid" id="latest-news-container">
            <!-- Последние новости будут загружены через JavaScript -->
         </div>
      </section>

      <!-- Остальная часть страницы -->
      <section class="all-news">
         <h2>Все новости</h2>
         <div class="filters">
            <div class="filter-group">
               <label for="year-filter">Год:</label>
               <select id="year-filter">
                  <option value="all">Все годы</option>
                  <option value="2023">2023</option>
                  <option value="2024">2024</option>
               </select>
            </div>

            <div class="filter-group">
               <label for="month-filter">Месяц:</label>
               <select id="month-filter">
                  <option value="all">Все месяцы</option>
                  <option value="1">Январь</option>
                  <option value="2">Февраль</option>
                  <option value="3">Март</option>
                  <option value="4">Апрель</option>
                  <option value="5">Май</option>
                  <option value="6">Июнь</option>
                  <option value="7">Июль</option>
                  <option value="8">Август</option>
                  <option value="9">Сентябрь</option>
                  <option value="10">Октябрь</option>
                  <option value="11">Ноябрь</option>
                  <option value="12">Декабрь</option>
               </select>
            </div>
         </div>

         <div class="news-grid" id="news-container">
            <!-- Все новости будут загружены через JavaScript -->
         </div>

         <div class="pagination" id="pagination">
            <!-- Пагинация будет создана через JavaScript -->
         </div>
      </section>
   </div>

   <!-- Модальное окно для новости -->
   <div class="modal" id="news-modal">
      <div class="modal-content">
         <span class="close-modal" id="close-modal">&times;</span>
         <h2 class="modal-title" id="modal-title">Заголовок новости</h2>
         <div class="modal-date" id="modal-date">Дата публикации</div>
         <div class="modal-main-image">
            <img id="modal-main-image" src="" alt="Главное изображение новости">
         </div>
         <div class="modal-text" id="modal-text">
            Полный текст новости...
         </div>
         <div class="modal-gallery">
            <h3 class="gallery-title">Галерея изображений</h3>
            <div class="slider-container">
               <div class="slider" id="slider">
                  <!-- Слайды будут добавлены через JavaScript -->
               </div>
               <button class="slider-arrow prev" id="prev-btn">&#10094;</button>
               <button class="slider-arrow next" id="next-btn">&#10095;</button>
            </div>
            <div class="slider-controls">
               <div class="slider-dots" id="slider-dots">
                  <!-- Точки будут добавлены через JavaScript -->
               </div>
            </div>
         </div>
      </div>
   </div>

   <!-- Полноэкранный просмотр изображения -->
   <div class="fullscreen-image" id="fullscreen-image">
      <span class="close-fullscreen">&times;</span>
      <div class="fullscreen-container">
         <button class="fullscreen-arrow prev" id="fullscreen-prev">&#10094;</button>
         <img src="" alt="Полноэкранное изображение">
         <button class="fullscreen-arrow next" id="fullscreen-next">&#10095;</button>
      </div>
      <div class="fullscreen-caption" id="fullscreen-caption"></div>
   </div>

   <script>
      // Данные новостей
      const newsData = [
         {
            id: 1,
            title: "Новые технологии в веб-разработке",
            summary: "Обзор последних тенденций и инструментов для современных разработчиков.",
            fullText: "Веб-разработка продолжает стремительно развиваться. В этом году мы увидели появление новых фреймворков, улучшение существующих инструментов и изменение подходов к созданию веб-приложений. Особое внимание уделяется производительности, доступности и безопасности. React и Vue.js остаются лидерами среди фронтенд-фреймворков, в то время как на бэкенде популярность набирают Node.js и Python с Django. Также растет интерес к серверless архитектурам и микросервисам.",
            date: "2024-05-15",
            images: [
               "https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
               "https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
               "https://images.unsplash.com/photo-1547658719-da2b51169166?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
            ]
         },
         {
            id: 2,
            title: "Искусственный интеллект в медицине",
            summary: "Как ИИ помогает врачам ставить точные диагнозы и разрабатывать новые лекарства.",
            fullText: "Искусственный интеллект революционизирует медицину. Алгоритмы машинного обучения уже сегодня помогают анализировать медицинские изображения, предсказывать развитие заболеваний и персонализировать лечение. В диагностике рака ИИ показывает точность, сравнимую с опытными врачами. Также ИИ используется для разработки новых лекарств, значительно ускоряя этот процесс. Эти технологии не заменят врачей, но станут мощным инструментом в их руках.",
            date: "2024-04-22",
            images: [
               "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
               "https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
            ]
         },
         {
            id: 3,
            title: "Кибербезопасность в 2024 году",
            summary: "Основные угрозы и методы защиты от кибератак для бизнеса и частных пользователей.",
            fullText: "С ростом цифровизации увеличивается и количество кибератак. В 2024 году эксперты прогнозируют рост фишинговых атак, атак вымогателей и целевых атак на критическую инфраструктуру. Для защиты необходимо использовать многофакторную аутентификацию, регулярно обновлять программное обеспечение и обучать сотрудников основам кибергигиены. Также важно иметь план реагирования на инциденты и регулярно делать резервные копии данных.",
            date: "2024-03-10",
            images: [
               "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
               "https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
            ]
         }
      ];

      // Элементы DOM
      const latestNewsContainer = document.getElementById('latest-news-container');
      const newsContainer = document.getElementById('news-container');
      const paginationContainer = document.getElementById('pagination');
      const yearFilter = document.getElementById('year-filter');
      const monthFilter = document.getElementById('month-filter');
      const newsModal = document.getElementById('news-modal');
      const closeModal = document.getElementById('close-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalDate = document.getElementById('modal-date');
      const modalText = document.getElementById('modal-text');
      const modalMainImage = document.getElementById('modal-main-image');
      const slider = document.getElementById('slider');
      const sliderDots = document.getElementById('slider-dots');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const fullscreenImage = document.getElementById('fullscreen-image');
      const fullscreenImg = fullscreenImage.querySelector('img');
      const fullscreenCaption = document.getElementById('fullscreen-caption');
      const closeFullscreen = fullscreenImage.querySelector('.close-fullscreen');
      const fullscreenPrev = document.getElementById('fullscreen-prev');
      const fullscreenNext = document.getElementById('fullscreen-next');

      // Переменные состояния
      let currentPage = 1;
      const newsPerPage = 6;
      let filteredNews = [...newsData];
      let currentSlide = 0;
      let currentNewsImages = [];
      let fullscreenCurrentSlide = 0;

      // Переменные для обработки свайпов
      let startX = 0;
      let currentX = 0;
      let isSwiping = false;

      // Функция инициализации приложения
      function init() {
         renderLatestNews();
         renderNews();
         setupFilters();
         setupEventListeners();
         setupSwipeHandlers();
      }

      // Функция отрисовки последних новостей (3 самые свежие)
      function renderLatestNews() {
         latestNewsContainer.innerHTML = '';

         const latestNews = [...newsData]
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 3);

         latestNews.forEach(news => {
            const newsCard = document.createElement('div');
            newsCard.className = 'latest-news-card';
            newsCard.setAttribute('data-id', news.id);

            const date = new Date(news.date);
            const formattedDate = date.toLocaleDateString('ru-RU', {
               year: 'numeric',
               month: 'long',
               day: 'numeric'
            });

            newsCard.innerHTML = `
                    <img src="${news.images[0]}" alt="${news.title}" class="latest-news-image">
                    <div class="latest-news-content">
                        <div class="latest-news-date">${formattedDate}</div>
                        <h3 class="latest-news-title">${news.title}</h3>
                        <p class="latest-news-summary">${news.summary}</p>
                    </div>
                `;

            latestNewsContainer.appendChild(newsCard);
         });
      }

      // Функция отрисовки всех новостей
      function renderNews() {
         newsContainer.innerHTML = '';

         const startIndex = (currentPage - 1) * newsPerPage;
         const endIndex = startIndex + newsPerPage;
         const newsToShow = filteredNews.slice(startIndex, endIndex);

         if (newsToShow.length === 0) {
            newsContainer.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; padding: 40px;">Новости не найдены</p>';
            paginationContainer.innerHTML = '';
            return;
         }

         newsToShow.forEach(news => {
            const newsCard = document.createElement('div');
            newsCard.className = 'news-card';
            newsCard.setAttribute('data-id', news.id);

            const date = new Date(news.date);
            const formattedDate = date.toLocaleDateString('ru-RU', {
               year: 'numeric',
               month: 'long',
               day: 'numeric'
            });

            newsCard.innerHTML = `
                    <img src="${news.images[0]}" alt="${news.title}" class="news-image">
                    <div class="news-content">
                        <div class="news-date">${formattedDate}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-summary">${news.summary}</p>
                    </div>
                `;

            newsContainer.appendChild(newsCard);
         });

         renderPagination();
      }

      function renderPagination() {
         const totalPages = Math.ceil(filteredNews.length / newsPerPage);

         paginationContainer.innerHTML = '';

         if (totalPages < 2) return;

         for (let i = 1; i <= totalPages; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
            pageBtn.textContent = i;
            pageBtn.addEventListener('click', () => {
               currentPage = i;
               renderNews();
            });

            paginationContainer.appendChild(pageBtn);
         }
      }

      function setupFilters() {
         yearFilter.addEventListener('change', applyFilters);
         monthFilter.addEventListener('change', applyFilters);
      }

      function applyFilters() {
         const selectedYear = yearFilter.value;
         const selectedMonth = monthFilter.value;

         currentPage = 1;

         filteredNews = newsData.filter(news => {
            const newsDate = new Date(news.date);
            const newsYear = newsDate.getFullYear().toString();
            const newsMonth = (newsDate.getMonth() + 1).toString();

            const yearMatch = selectedYear === 'all' || newsYear === selectedYear;
            const monthMatch = selectedMonth === 'all' || newsMonth === selectedMonth;

            return yearMatch && monthMatch;
         });

         renderNews();
      }

      function setupSwipeHandlers() {
         setupSwipeForElement(slider, handleSliderSwipe);
         setupSwipeForElement(fullscreenImage, handleFullscreenSwipe);
      }

      function setupSwipeForElement(element, callback) {
         element.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            currentX = startX;
            isSwiping = true;
         }, { passive: true });

         element.addEventListener('touchmove', (e) => {
            if (!isSwiping) return;
            currentX = e.touches[0].clientX;
         }, { passive: true });

         element.addEventListener('touchend', (e) => {
            if (!isSwiping) return;

            const diffX = startX - currentX;
            const minSwipeDistance = 50;

            if (Math.abs(diffX) > minSwipeDistance) {
               if (diffX > 0) {
                  callback(1);
               } else {
                  callback(-1);
               }
            }

            isSwiping = false;
         }, { passive: true });
      }

      function handleSliderSwipe(direction) {
         changeSlide(direction);
      }

      function handleFullscreenSwipe(direction) {
         changeFullscreenSlide(direction);
      }

      function setupEventListeners() {
         // Обработчик для последних новостей - клик по любой области карточки
         latestNewsContainer.addEventListener('click', (e) => {
            const newsCard = e.target.closest('.latest-news-card');
            if (newsCard) {
               const newsId = parseInt(newsCard.getAttribute('data-id'));
               const news = newsData.find(item => item.id === newsId);

               if (news) {
                  openNewsModal(news);
               }
            }
         });

         // Обработчик для всех новостей - клик по любой области карточки
         newsContainer.addEventListener('click', (e) => {
            const newsCard = e.target.closest('.news-card');
            if (newsCard) {
               const newsId = parseInt(newsCard.getAttribute('data-id'));
               const news = newsData.find(item => item.id === newsId);

               if (news) {
                  openNewsModal(news);
               }
            }
         });

         // Остальные обработчики без изменений
         closeModal.addEventListener('click', closeNewsModal);
         newsModal.addEventListener('click', (e) => {
            if (e.target === newsModal) {
               closeNewsModal();
            }
         });

         prevBtn.addEventListener('click', () => changeSlide(-1));
         nextBtn.addEventListener('click', () => changeSlide(1));

         slider.addEventListener('click', (e) => {
            if (e.target.tagName === 'IMG') {
               const slideIndex = Array.from(slider.children).indexOf(e.target.parentElement);
               openFullscreenImage(slideIndex);
            }
         });

         fullscreenPrev.addEventListener('click', () => changeFullscreenSlide(-1));
         fullscreenNext.addEventListener('click', () => changeFullscreenSlide(1));

         closeFullscreen.addEventListener('click', closeFullscreenImage);
         fullscreenImage.addEventListener('click', (e) => {
            if (e.target === fullscreenImage) {
               closeFullscreenImage();
            }
         });
      }

      function openNewsModal(news) {
         const date = new Date(news.date);
         const formattedDate = date.toLocaleDateString('ru-RU', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
         });

         modalTitle.textContent = news.title;
         modalDate.textContent = formattedDate;
         modalText.textContent = news.fullText;
         modalMainImage.src = news.images[0];
         modalMainImage.alt = news.title;

         currentNewsImages = news.images;
         currentSlide = 0;

         slider.innerHTML = '';
         sliderDots.innerHTML = '';

         news.images.forEach((image, index) => {
            const slide = document.createElement('div');
            slide.className = `slide ${index === 0 ? 'active' : ''}`;
            slide.innerHTML = `<img src="${image}" alt="${news.title} - изображение ${index + 1}">`;
            slider.appendChild(slide);

            const dot = document.createElement('div');
            dot.className = `dot ${index === 0 ? 'active' : ''}`;
            dot.addEventListener('click', () => goToSlide(index));
            sliderDots.appendChild(dot);
         });

         updateSlider();

         newsModal.style.display = 'block';
         document.body.style.overflow = 'hidden';
      }

      function closeNewsModal() {
         newsModal.style.display = 'none';
         document.body.style.overflow = 'auto';
      }

      function changeSlide(direction) {
         currentSlide += direction;

         if (currentSlide < 0) {
            currentSlide = currentNewsImages.length - 1;
         } else if (currentSlide >= currentNewsImages.length) {
            currentSlide = 0;
         }

         goToSlide(currentSlide);
      }

      function goToSlide(slideIndex) {
         currentSlide = slideIndex;
         updateSlider();
      }

      function updateSlider() {
         slider.style.transform = `translateX(-${currentSlide * 100}%)`;

         const dots = sliderDots.querySelectorAll('.dot');
         dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentSlide);
         });
      }

      function openFullscreenImage(slideIndex) {
         fullscreenCurrentSlide = slideIndex;
         updateFullscreenImage();
         fullscreenImage.style.display = 'flex';
         document.body.style.overflow = 'hidden';
      }

      function closeFullscreenImage() {
         fullscreenImage.style.display = 'none';
         document.body.style.overflow = 'auto';
      }

      function changeFullscreenSlide(direction) {
         fullscreenCurrentSlide += direction;

         if (fullscreenCurrentSlide < 0) {
            fullscreenCurrentSlide = currentNewsImages.length - 1;
         } else if (fullscreenCurrentSlide >= currentNewsImages.length) {
            fullscreenCurrentSlide = 0;
         }

         updateFullscreenImage();
      }

      function updateFullscreenImage() {
         // Загружаем изображение и устанавливаем его в полноэкранный режим
         const img = new Image();
         img.onload = function () {
            fullscreenImg.src = currentNewsImages[fullscreenCurrentSlide];
            fullscreenCaption.textContent = `Изображение ${fullscreenCurrentSlide + 1} из ${currentNewsImages.length}`;

            // Адаптация изображения под экран
            adaptImageToScreen();
         };
         img.src = currentNewsImages[fullscreenCurrentSlide];
      }

      // Функция для адаптации изображения под экран
      function adaptImageToScreen() {
         const img = fullscreenImg;
         const screenWidth = window.innerWidth;
         const screenHeight = window.innerHeight;

         // Если изображение маленькое, растягиваем его на весь экран
         if (img.naturalWidth < screenWidth || img.naturalHeight < screenHeight) {
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'cover';
         } else {
            // Для больших изображений сохраняем пропорции
            img.style.width = 'auto';
            img.style.height = '100vh';
            img.style.objectFit = 'contain';
         }
      }

      // Обработчик изменения размера окна
      window.addEventListener('resize', function () {
         if (fullscreenImage.style.display === 'flex') {
            adaptImageToScreen();
         }
      });

      // Запуск приложения
      init();
   </script>
</body>

</html>