<!DOCTYPE html>
<html lang="ru">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Сайт с панелью доступности</title>

   <!-- Подключение библиотеки ALA -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ala@1.0.0/dist/ala.min.css">
   <script src="https://cdn.jsdelivr.net/npm/ala@1.0.0/dist/ala.min.js"></script>

   <style>
      /* Стили для кнопки активации */
      .top_vision_helper {
         position: fixed;
         top: 20px;
         right: 20px;
         z-index: 10000;
         width: 50px;
         height: 50px;
         background: #2c3e50;
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
         cursor: pointer;
         box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
         transition: all 0.3s ease;
      }

      .top_vision_helper:hover {
         transform: scale(1.1);
         background: #34495e;
      }

      .top_vision_helper img {
         width: 24px;
         height: 24px;
         filter: brightness(0) invert(1);
      }

      /* Дополнительные стили для демонстрации */
      .content {
         max-width: 800px;
         margin: 0 auto;
         padding: 20px;
         font-family: Arial, sans-serif;
      }

      .demo-image {
         width: 100%;
         height: 200px;
         background: #ecf0f1;
         margin: 20px 0;
         display: flex;
         align-items: center;
         justify-content: center;
         color: #7f8c8d;
      }
   </style>
</head>

<body>
   <!-- Ваша кнопка для активации панели -->
   <div class="top_vision_helper" onclick="ALA.togglePanel()">
      <img
         src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMyIvPjxwYXRoIGQ9Ik0xMiAxOWMtMy44NyAwLTcuMTUtMi4zMi04LjY1LTUuNzdDNC4zNSAxMC4wMiA3LjczIDUgMTIgNWM0LjI3IDAgNy42NSA1LjAyIDguNjUgOC4yM0MxOS4xNSAxNi42OCAxNS44NyAxOSAxMiAxOXoiLz48L3N2Zz4="
         alt="Версия для слабовидящих">
   </div>

   <!-- Контент сайта для демонстрации -->
   <div class="content">
      <h1>Добро пожаловать на наш сайт</h1>
      <p>Это демонстрационная страница с панелью доступности для слабовидящих.</p>

      <h2>О нас</h2>
      <p>Мы занимаемся созданием доступных веб-решений для всех пользователей.</p>

      <div class="demo-image">Демонстрационное изображение</div>

      <h2>Наши услуги</h2>
      <ul>
         <li>Веб-разработка</li>
         <li>Доступность сайтов</li>
         <li>Пользовательский опыт</li>
      </ul>

      <a href="#">Пример ссылки</a>
   </div>

   <script>
      // Инициализация панели ALA
      document.addEventListener('DOMContentLoaded', function () {
         // Базовая конфигурация ALA
         const alaConfig = {
            position: 'right', // Позиция панели (left/right)
            language: 'ru', // Язык интерфейса
            tools: {
               fontBigger: true,
               fontSmaller: true,
               contrast: true,
               invert: true,
               grayscale: true,
               textToSpeech: true,
               speechToText: true,
               linkUnderline: true,
               readableFont: true,
               reset: true
            },
            // Кастомизация внешнего вида
            styles: {
               primaryColor: '#2c3e50',
               textColor: '#ffffff',
               backgroundColor: '#34495e'
            }
         };

         // Инициализация ALA
         if (typeof ALA !== 'undefined') {
            ALA.init(alaConfig);
         } else {
            console.error('Библиотека ALA не загружена');

            // Fallback - простая реализация если ALA не загрузилась
            document.querySelector('.top_vision_helper').addEventListener('click', function () {
               alert('Панель доступности будет доступна после полной загрузки библиотеки');
            });
         }
      });

      // Альтернативная реализация на случай проблем с ALA
      function initAccessibilityFallback() {
         const fallbackPanel = document.createElement('div');
         fallbackPanel.id = 'fallback-accessibility-panel';
         fallbackPanel.innerHTML = `
                <div style="position: fixed; top: 50%; right: 0; transform: translateY(-50%); background: white; border: 1px solid #ccc; padding: 20px; z-index: 10001; box-shadow: -2px 2px 10px rgba(0,0,0,0.3);">
                    <h3>Версия для слабовидящих</h3>
                    <button onclick="changeFontSize('increase')">A+ Увеличить шрифт</button><br>
                    <button onclick="changeFontSize('decrease')">A- Уменьшить шрифт</button><br>
                    <button onclick="toggleContrast()">Высокая контрастность</button><br>
                    <button onclick="resetSettings()">Обычная версия</button><br>
                    <button onclick="closeFallbackPanel()">✕ Закрыть</button>
                </div>
            `;
         document.body.appendChild(fallbackPanel);
      }

      // Функции для fallback-панели
      function changeFontSize(action) {
         const body = document.body;
         const currentSize = parseInt(getComputedStyle(body).fontSize);

         if (action === 'increase') {
            body.style.fontSize = (currentSize + 2) + 'px';
         } else {
            body.style.fontSize = (currentSize - 2) + 'px';
         }

         localStorage.setItem('fontSize', body.style.fontSize);
      }

      function toggleContrast() {
         document.body.classList.toggle('high-contrast');
         localStorage.setItem('highContrast', document.body.classList.contains('high-contrast'));
      }

      function resetSettings() {
         document.body.style.fontSize = '';
         document.body.classList.remove('high-contrast');
         localStorage.removeItem('fontSize');
         localStorage.removeItem('highContrast');
      }

      function closeFallbackPanel() {
         const panel = document.getElementById('fallback-accessibility-panel');
         if (panel) panel.remove();
      }

      // Восстановление настроек при загрузке
      window.addEventListener('load', function () {
         const savedFontSize = localStorage.getItem('fontSize');
         const highContrast = localStorage.getItem('highContrast');

         if (savedFontSize) {
            document.body.style.fontSize = savedFontSize;
         }

         if (highContrast === 'true') {
            document.body.classList.add('high-contrast');
         }
      });

      // Стили для high-contrast режима
      const style = document.createElement('style');
      style.textContent = `
            .high-contrast {
                background: #000 !important;
                color: #fff !important;
            }
            .high-contrast a {
                color: #ffff00 !important;
            }
            .high-contrast .top_vision_helper {
                background: #ffff00 !important;
            }
            .high-contrast .top_vision_helper img {
                filter: brightness(0) !important;
            }
        `;
      document.head.appendChild(style);
   </script>
</body>

</html>