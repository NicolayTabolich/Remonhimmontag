<!DOCTYPE html>
<html lang="ru">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Фотогалерея по годам</title>
   <style>
      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
         background-color: #f5f5f5;
         color: #333;
         padding: 20px;
      }

      .container {
         max-width: 1200px;
         margin: 0 auto;
      }

      h1 {
         text-align: center;
         margin-bottom: 30px;
         color: #2c3e50;
      }

      .years-container {
         display: flex;
         flex-wrap: wrap;
         justify-content: center;
         gap: 20px;
         margin-bottom: 40px;
      }

      .year-card {
         background: white;
         border-radius: 10px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         overflow: hidden;
         width: 280px;
         cursor: pointer;
         transition: transform 0.3s, box-shadow 0.3s;
      }

      .year-card:hover {
         transform: translateY(-5px);
         box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      }

      .year-header {
         background: #3498db;
         color: white;
         padding: 15px;
         text-align: center;
         font-size: 1.5rem;
         font-weight: bold;
      }

      .year-preview {
         display: grid;
         grid-template-columns: 1fr 1fr;
         gap: 5px;
         padding: 5px;
      }

      .year-preview img {
         width: 100%;
         height: 100px;
         object-fit: cover;
         border-radius: 4px;
      }

      /* Слайдер */
      .slider {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background: rgba(0, 0, 0, 0.95);
         display: none;
         flex-direction: column;
         z-index: 1000;
         touch-action: pan-y pinch-zoom;
      }

      .slider.active {
         display: flex;
      }

      .slider-header {
         color: white;
         font-size: 1.8rem;
         text-align: center;
         padding: 15px 0;
         flex-shrink: 0;
      }

      .slider-close {
         position: absolute;
         top: 15px;
         right: 20px;
         color: white;
         font-size: 2rem;
         cursor: pointer;
         background: none;
         border: none;
         z-index: 1001;
      }

      .slider-main {
         display: flex;
         align-items: center;
         justify-content: center;
         width: 100%;
         margin: 0 auto;
         position: relative;
         flex: 1;
         min-height: 0;
         /* Важно для flex-элементов с overflow */
         padding: 0 10px;
         touch-action: pan-y pinch-zoom;
      }

      .slider-image-container {
         position: relative;
         overflow: hidden;
         border-radius: 8px;
         touch-action: pan-y pinch-zoom;
         width: 100%;
         height: 100%;
         display: flex;
         align-items: center;
         justify-content: center;
         background-color: #000;
         max-width: 1200px;
      }

      .slider-image {
         max-width: 100%;
         max-height: 100%;
         object-fit: contain;
         display: block;
         transition: transform 0.3s ease;
         transform: scale(1.05);
         /* Легкое увеличение изображения */
      }

      .slider-nav {
         display: flex;
         justify-content: center;
         margin: 15px 0;
         flex-shrink: 0;
      }

      .slider-nav button {
         background: rgba(255, 255, 255, 0.2);
         border: none;
         color: white;
         font-size: 2rem;
         width: 50px;
         height: 50px;
         border-radius: 50%;
         margin: 0 15px;
         cursor: pointer;
         transition: background 0.3s;
      }

      .slider-nav button:hover {
         background: rgba(255, 255, 255, 0.4);
      }

      .slider-thumbnails {
         display: flex;
         justify-content: center;
         gap: 10px;
         margin: 10px 0;
         padding: 10px;
         max-width: 100%;
         overflow-x: auto;
         touch-action: pan-x pinch-zoom;
         flex-shrink: 0;
      }

      .slider-thumbnail {
         width: 80px;
         height: 60px;
         object-fit: cover;
         border-radius: 4px;
         cursor: pointer;
         opacity: 0.6;
         transition: opacity 0.3s;
      }

      .slider-thumbnail.active {
         opacity: 1;
         border: 2px solid white;
      }

      .slider-thumbnail:hover {
         opacity: 0.8;
      }

      .swipe-hint {
         text-align: center;
         color: rgba(255, 255, 255, 0.7);
         font-size: 0.9rem;
         margin-bottom: 10px;
         flex-shrink: 0;
         display: none;
      }

      .slider-counter {
         text-align: center;
         color: rgba(255, 255, 255, 0.7);
         font-size: 1rem;
         margin: 10px 0;
         flex-shrink: 0;
      }

      /* Адаптивность для мобильных устройств */
      @media (max-width: 768px) {
         .year-card {
            width: 100%;
            max-width: 350px;
         }

         .slider-nav button {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            margin: 0 10px;
         }

         .slider-thumbnail {
            width: 60px;
            height: 45px;
         }

         .swipe-hint {
            display: block;
         }

         .slider-header {
            font-size: 1.5rem;
            padding: 10px 0;
         }

         .slider-close {
            top: 10px;
            right: 15px;
            font-size: 1.8rem;
         }

         .slider-main {
            padding: 0 5px;
         }
      }

      @media (max-width: 480px) {
         .slider-thumbnail {
            width: 50px;
            height: 40px;
         }

         .slider-header {
            font-size: 1.3rem;
         }
      }

      /* Для очень высоких экранов */
      @media (min-height: 1000px) {
         .slider-main {
            max-height: 70vh;
         }
      }
   </style>
</head>

<body>
   <div class="container">

      <div class="years-container">
         <!-- Год 2022 -->
         <div class="year-card" data-year="2022">
            <div class="year-header">2022</div>
            <div class="year-preview">
               <img src="img/bg_2.jpg" alt="Фото 2022-1">
               <img src="img/bg_1.jpg" alt="Фото 2022-2">
               <img src="img/bg_3.jpg" alt="Фото 2022-3">
               <img src="img/bg_4.jpg" alt="Фото 2022-4">
            </div>
         </div>

         <!-- Год 2023 -->
         <div class="year-card" data-year="2023">
            <div class="year-header">2023</div>
            <div class="year-preview">
               <img src="https://picsum.photos/id/1021/300/200" alt="Фото 2023-1">
               <img src="https://picsum.photos/id/1022/300/200" alt="Фото 2023-2">
               <img src="https://picsum.photos/id/1023/300/200" alt="Фото 2023-3">
               <img src="https://picsum.photos/id/1024/300/200" alt="Фото 2023-4">
            </div>
         </div>

         <!-- Год 2024 -->
         <div class="year-card" data-year="2024">
            <div class="year-header">2024</div>
            <div class="year-preview">
               <img src="https://picsum.photos/id/1025/300/200" alt="Фото 2024-1">
               <img src="https://picsum.photos/id/1027/300/200" alt="Фото 2024-2">
               <img src="https://picsum.photos/id/1029/300/200" alt="Фото 2024-3">
               <img src="https://picsum.photos/id/1031/300/200" alt="Фото 2024-4">
            </div>
         </div>

         <!-- Год 2025 -->
         <div class="year-card" data-year="2025">
            <div class="year-header">2025</div>
            <div class="year-preview">
               <img src="https://picsum.photos/id/1035/300/200" alt="Фото 2025-1">
               <img src="https://picsum.photos/id/1036/300/200" alt="Фото 2025-2">
               <img src="https://picsum.photos/id/1037/300/200" alt="Фото 2025-3">
               <img src="https://picsum.photos/id/1038/300/200" alt="Фото 2025-4">
            </div>
         </div>
      </div>
   </div>

   <!-- Слайдер -->
   <div class="slider">
      <button class="slider-close">&times;</button>
      <h2 class="slider-header">2022</h2>

      <div class="slider-main">
         <div class="slider-image-container">
            <img class="slider-image" src="" alt="Текущее фото">
         </div>
      </div>

      <div class="slider-counter">
         <span class="current-index">1</span> / <span class="total-count">4</span>
      </div>

      <div class="slider-nav">
         <button class="slider-prev-nav">&#10094;</button>
         <button class="slider-next-nav">&#10095;</button>
      </div>

      <div class="slider-thumbnails">
         <!-- Миниатюры будут добавлены через JavaScript -->
      </div>
   </div>

   <script>
      // Данные для галереи (обычно загружаются с сервера)
      const galleryData = {
         "2022": [
            { src: "img/bg_1.jpg", alt: "Фото 2022-1" },
            { src: "img/bg_4.jpg", alt: "Фото 2022-2" },
            { src: "img/bg_3.jpg", alt: "Фото 2022-3" },
            { src: "img/bg_2.jpg", alt: "Фото 2022-4" }
         ],
         "2023": [
            { src: "https://picsum.photos/id/1021/800/600", alt: "Фото 2023-1" },
            { src: "https://picsum.photos/id/1022/800/600", alt: "Фото 2023-2" },
            { src: "https://picsum.photos/id/1023/800/600", alt: "Фото 2023-3" },
            { src: "https://picsum.photos/id/1024/800/600", alt: "Фото 2023-4" }
         ],
         "2024": [
            { src: "https://picsum.photos/id/1025/800/600", alt: "Фото 2024-1" },
            { src: "https://picsum.photos/id/1027/800/600", alt: "Фото 2024-2" },
            { src: "https://picsum.photos/id/1029/800/600", alt: "Фото 2024-3" },
            { src: "https://picsum.photos/id/1031/800/600", alt: "Фото 2024-4" }
         ],
         "2025": [
            { src: "https://picsum.photos/id/1035/800/600", alt: "Фото 2025-1" },
            { src: "https://picsum.photos/id/1036/800/600", alt: "Фото 2025-2" },
            { src: "https://picsum.photos/id/1037/800/600", alt: "Фото 2025-3" },
            { src: "https://picsum.photos/id/1038/800/600", alt: "Фото 2025-4" }
         ]
      };

      // Переменные для управления слайдером
      let currentYear = '';
      let currentIndex = 0;
      let currentImages = [];
      let touchStartX = 0;
      let touchEndX = 0;
      let isSwiping = false;

      // Элементы слайдера
      const slider = document.querySelector('.slider');
      const sliderImage = document.querySelector('.slider-image');
      const sliderImageContainer = document.querySelector('.slider-image-container');
      const sliderHeader = document.querySelector('.slider-header');
      const sliderThumbnails = document.querySelector('.slider-thumbnails');
      const closeButton = document.querySelector('.slider-close');
      const prevNavButton = document.querySelector('.slider-prev-nav');
      const nextNavButton = document.querySelector('.slider-next-nav');
      const currentIndexSpan = document.querySelector('.current-index');
      const totalCountSpan = document.querySelector('.total-count');

      // Открытие слайдера при клике на год
      document.querySelectorAll('.year-card').forEach(card => {
         card.addEventListener('click', () => {
            const year = card.getAttribute('data-year');
            openSlider(year);
         });
      });

      // Функция открытия слайдера
      function openSlider(year) {
         currentYear = year;
         currentIndex = 0;
         currentImages = galleryData[year];

         // Обновляем заголовок
         sliderHeader.textContent = year;

         // Обновляем счетчик
         updateCounter();

         // Показываем первое изображение
         updateSliderImage();

         // Создаем миниатюры
         createThumbnails();

         // Показываем слайдер
         slider.classList.add('active');

         // Блокируем прокрутку страницы
         document.body.style.overflow = 'hidden';
      }

      // Функция закрытия слайдера
      function closeSlider() {
         slider.classList.remove('active');
         document.body.style.overflow = 'auto';
      }

      // Функция обновления изображения в слайдере
      function updateSliderImage() {
         if (currentImages.length > 0) {
            // Добавляем анимацию смены изображения
            sliderImage.style.opacity = '0';

            setTimeout(() => {
               sliderImage.src = currentImages[currentIndex].src;
               sliderImage.alt = currentImages[currentIndex].alt;
               sliderImage.style.opacity = '1';

               // Обновляем активную миниатюру
               updateActiveThumbnail();

               // Обновляем счетчик
               updateCounter();
            }, 200);
         }
      }

      // Функция обновления счетчика
      function updateCounter() {
         currentIndexSpan.textContent = currentIndex + 1;
         totalCountSpan.textContent = currentImages.length;
      }

      // Функция создания миниатюр
      function createThumbnails() {
         sliderThumbnails.innerHTML = '';

         currentImages.forEach((image, index) => {
            const thumbnail = document.createElement('img');
            thumbnail.src = image.src;
            thumbnail.alt = image.alt;
            thumbnail.classList.add('slider-thumbnail');

            if (index === currentIndex) {
               thumbnail.classList.add('active');
            }

            thumbnail.addEventListener('click', () => {
               currentIndex = index;
               updateSliderImage();
            });

            sliderThumbnails.appendChild(thumbnail);
         });
      }

      // Функция обновления активной миниатюры
      function updateActiveThumbnail() {
         const thumbnails = document.querySelectorAll('.slider-thumbnail');
         thumbnails.forEach((thumbnail, index) => {
            if (index === currentIndex) {
               thumbnail.classList.add('active');
            } else {
               thumbnail.classList.remove('active');
            }
         });
      }

      // Функция перехода к предыдущему изображению
      function prevImage() {
         currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
         updateSliderImage();
      }

      // Функция перехода к следующему изображению
      function nextImage() {
         currentIndex = (currentIndex + 1) % currentImages.length;
         updateSliderImage();
      }

      // Обработчики событий
      closeButton.addEventListener('click', closeSlider);
      prevNavButton.addEventListener('click', prevImage);
      nextNavButton.addEventListener('click', nextImage);

      // Закрытие слайдера при клике на затемненную область
      slider.addEventListener('click', (e) => {
         if (e.target === slider) {
            closeSlider();
         }
      });

      // Управление с клавиатуры
      document.addEventListener('keydown', (e) => {
         if (slider.classList.contains('active')) {
            if (e.key === 'Escape') {
               closeSlider();
            } else if (e.key === 'ArrowLeft') {
               prevImage();
            } else if (e.key === 'ArrowRight') {
               nextImage();
            }
         }
      });

      // Обработчики свайпа для мобильных устройств
      sliderImageContainer.addEventListener('touchstart', (e) => {
         touchStartX = e.changedTouches[0].screenX;
         isSwiping = true;
      }, { passive: true });

      sliderImageContainer.addEventListener('touchmove', (e) => {
         if (!isSwiping) return;

         const touchX = e.changedTouches[0].screenX;
         const diff = touchX - touchStartX;

         // Добавляем небольшое смещение изображения при свайпе для интерактивности
         sliderImage.style.transform = `scale(1.05) translateX(${diff * 0.5}px)`;
      }, { passive: true });

      sliderImageContainer.addEventListener('touchend', (e) => {
         if (!isSwiping) return;

         touchEndX = e.changedTouches[0].screenX;
         handleSwipe();
         isSwiping = false;

         // Сбрасываем смещение изображения
         sliderImage.style.transform = 'scale(1.05)';
      }, { passive: true });

      // Функция обработки свайпа
      function handleSwipe() {
         const minSwipeDistance = 50; // Минимальное расстояние для срабатывания свайпа
         const diff = touchStartX - touchEndX;

         if (Math.abs(diff) < minSwipeDistance) return;

         if (diff > 0) {
            // Свайп влево - следующее изображение
            nextImage();
         } else {
            // Свайп вправо - предыдущее изображение
            prevImage();
         }
      }
   </script>
</body>

</html>